[gd_scene load_steps=12 format=3 uid="uid://cgdjulw3q7axd"]

[ext_resource type="Script" path="res://elements/pop_bumper.gd" id="1_ypt3u"]
[ext_resource type="Material" uid="uid://b43rlaqm12whx" path="res://materials/ball.tres" id="2_60n57"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_42nhi"]
albedo_color = Color(1, 0.160784, 0.160784, 1)
emission_enabled = true
emission = Color(1, 0, 0, 1)
emission_energy_multiplier = 0.47

[sub_resource type="CylinderMesh" id="CylinderMesh_xa0o1"]
material = SubResource("StandardMaterial3D_42nhi")
top_radius = 0.2
bottom_radius = 0.25
height = 0.1

[sub_resource type="CylinderMesh" id="CylinderMesh_eqae3"]
top_radius = 0.1
bottom_radius = 0.1
height = 0.3

[sub_resource type="CylinderShape3D" id="CylinderShape3D_xxs4f"]
height = 0.3
radius = 0.1

[sub_resource type="CylinderShape3D" id="CylinderShape3D_hpw4f"]
height = 0.3
radius = 0.141623

[sub_resource type="CylinderMesh" id="CylinderMesh_it0wu"]
material = ExtResource("2_60n57")
top_radius = 0.2
bottom_radius = 0.1
height = 0.1

[sub_resource type="SphereShape3D" id="SphereShape3D_bdlfr"]
radius = 0.35496

[sub_resource type="Animation" id="Animation_7gfeb"]
resource_name = "pop kick"
length = 0.1
step = 0.005
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = false
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.05, 0.1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0, 1.14055, 0), Vector3(0, 1.03356, 0), Vector3(0, 1.14055, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_cq4fo"]
_data = {
"pop kick": SubResource("Animation_7gfeb")
}

[node name="PopBumper" type="Node3D"]
editor_description = "a pop bumper detects when the ball comes near and activates its kicker, sending the ball away at high speed."
script = ExtResource("1_ypt3u")

[node name="BumperCapMesh" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.206779, 0)
mesh = SubResource("CylinderMesh_xa0o1")

[node name="OmniLight3D" type="OmniLight3D" parent="BumperCapMesh"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0391312, 0)
light_color = Color(1, 0.0117647, 0.0117647, 1)
omni_range = 0.730948

[node name="BumperBodyMesh" type="MeshInstance3D" parent="."]
mesh = SubResource("CylinderMesh_eqae3")

[node name="BodyCollider" type="StaticBody3D" parent="BumperBodyMesh"]
collision_layer = 2
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="BumperBodyMesh/BodyCollider"]
shape = SubResource("CylinderShape3D_xxs4f")

[node name="PopTrigger" type="Area3D" parent="BumperBodyMesh"]
collision_layer = 2

[node name="TriggerArea" type="CollisionShape3D" parent="BumperBodyMesh/PopTrigger"]
shape = SubResource("CylinderShape3D_hpw4f")

[node name="Kicker" type="AnimatableBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.14055, 0)
collision_layer = 2
collision_mask = 0

[node name="KickerMesh" type="MeshInstance3D" parent="Kicker"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.0377, 0)
mesh = SubResource("CylinderMesh_it0wu")

[node name="KickerCollider" type="CollisionShape3D" parent="Kicker"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.10352e-05, -0.749957, 0.000244141)
shape = SubResource("SphereShape3D_bdlfr")

[node name="AnimationPlayer" type="AnimationPlayer" parent="Kicker"]
libraries = {
"": SubResource("AnimationLibrary_cq4fo")
}

[connection signal="body_entered" from="BumperBodyMesh/PopTrigger" to="." method="_on_pop_trigger_body_entered"]
