[gd_scene load_steps=7 format=3 uid="uid://dxy60i7pcq7a6"]

[ext_resource type="Script" path="res://elements/flipper/flipper.gd" id="1_p24pt"]
[ext_resource type="Script" path="res://elements/flipper/FlipperBody.gd" id="2_4le5i"]
[ext_resource type="Script" path="res://utilities/SolenoidSpring.gd" id="4_8wtpa"]
[ext_resource type="ArrayMesh" uid="uid://bbv7b1e83raqq" path="res://meshes/flipper3.obj" id="4_d7sv0"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_ar7xr"]
friction = 0.8
bounce = 0.2
absorbent = true

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_v4yik"]
points = PackedVector3Array(3.26432, 0.882795, 0, 3.29391, 0.710729, 0, 3.26066, 0.882795, -0.0396669, 3.26066, 0.882795, 0.0395812, 3.29391, 0.194962, 0, 3.28989, 0.710729, -0.0427511, 3.28989, 0.710729, 0.0426655, 3.24897, 0.882795, -0.077706, 3.27783, 0.710729, -0.0837888, 3.24897, 0.882795, 0.0776203, 3.27783, 0.710729, 0.0837032, 3.28989, 0.194962, 0.0426655, 3.26066, 0.00695, 0.0395812, 3.26432, 0.00695, 0, 3.26066, 0.00695, -0.0396669, 3.28989, 0.194962, -0.0427511, 3.25884, 0.710729, -0.121571, 3.23034, 0.882795, -0.112832, 3.27783, 0.194962, -0.0837888, 3.25884, 0.710729, 0.121485, 3.23034, 0.882795, 0.112747, 3.27783, 0.194962, 0.0837032, 3.24897, 0.00695, 0.0776203, 3.24897, 0.00695, -0.077706, 3.25884, 0.194962, -0.121571, 3.23326, 0.710729, -0.154812, 3.20477, 0.882795, -0.143589, 3.23326, 0.710729, 0.154727, 3.25884, 0.194962, 0.121485, 3.20477, 0.882795, 0.143503, 3.23034, 0.00695, 0.112747, 3.23034, 0.00695, -0.112832, 3.23326, 0.194962, -0.154812, 3.20185, 0.710729, -0.181971, 3.17409, 0.882795, -0.168863, 3.20185, 0.710729, 0.181885, 3.23326, 0.194962, 0.154727, 3.17409, 0.882795, 0.168777, 3.20477, 0.00695, 0.143503, 3.20477, 0.00695, -0.143589, 3.20185, 0.194962, -0.181971, 3.16641, 0.710729, -0.20219, 3.13902, 0.882795, -0.187625, 3.20185, 0.194962, 0.181885, 3.16641, 0.710729, 0.202104, 3.13902, 0.882795, 0.18754, 3.17409, 0.00695, 0.168777, 3.17409, 0.00695, -0.168863, 3.16641, 0.194962, -0.20219, 3.12769, 0.710729, -0.214698, 3.10102, 0.882795, -0.199191, 3.16641, 0.194962, 0.202104, 3.12769, 0.710729, 0.214612, 3.10102, 0.882795, 0.199106, 3.13902, 0.00695, 0.18754, 3.13902, 0.00695, -0.187625, 3.12769, 0.194962, -0.214698, 3.08714, 0.710729, -0.218896, 3.06121, 0.882795, -0.203047, 3.12769, 0.194962, 0.214612, 3.08714, 0.710729, 0.21881, 3.06121, 0.882795, 0.202961, 3.10102, 0.00695, 0.199106, 3.10102, 0.00695, -0.199191, 3.08714, 0.194962, -0.218896, 2.58521, 0.710729, -0.254194, 2.96257, 0.882795, -0.209643, 1.27998, 0.710729, -0.34595, 0.476676, 0.710729, -0.402409, 0.175299, 0.710729, -0.423571, 0.075206, 0.710729, -0.430596, -0.0252528, 0.710729, -0.437621, 3.08714, 0.194962, 0.21881, 2.58521, 0.710729, 0.254108, 2.96257, 0.882795, 0.209558, -0.0252528, 0.710729, 0.437621, 3.06121, 0.00695, 0.202961, 3.06121, 0.00695, -0.203047, 2.58521, 0.194962, -0.254194, 2.56768, 0.882795, -0.23586, 1.27998, 0.194962, -0.34595, 0.476676, 0.194962, -0.402409, 0.175299, 0.194962, -0.423571, 0.075206, 0.194962, -0.430596, -0.0252528, 0.194962, -0.437621, -0.105985, 0.710729, -0.429225, -0.0793179, 0.882795, -0.398297, -4.67598e-05, 0.882795, -0.406093, 0.0985855, 0.882795, -0.399582, 0.592477, 0.882795, -0.366855, 2.37005, 0.882795, -0.248968, 2.58521, 0.194962, 0.254108, 2.56768, 0.882795, 0.235774, 0.592477, 0.882795, 0.366769, 0.0985855, 0.882795, 0.399496, -4.67598e-05, 0.882795, 0.406007, -0.0793179, 0.882795, 0.398211, -0.105985, 0.710729, 0.429139, -0.0252528, 0.194962, 0.437621, 2.37005, 0.882795, 0.248882, 2.96257, 0.00695, 0.209558, 2.96257, 0.00695, -0.209643, 0.592477, 0.00695, -0.366855, 0.0985855, 0.00695, -0.399582, -4.67598e-05, 0.00695, -0.406093, -0.0793179, 0.00695, -0.398297, -0.105985, 0.194962, -0.429225, 2.56768, 0.00695, -0.23586, 2.37005, 0.00695, -0.248968, -0.18343, 0.710729, -0.40438, -0.155667, 0.882795, -0.375165, -0.155667, 0.882795, 0.375079, -0.18343, 0.710729, 0.404294, -0.105985, 0.194962, 0.429139, -0.0793179, 0.00695, 0.398211, -4.67598e-05, 0.00695, 0.406007, 0.0985855, 0.00695, 0.399496, 0.592477, 0.00695, 0.366769, 2.37005, 0.00695, 0.248882, 2.56768, 0.00695, 0.235774, -0.155667, 0.00695, -0.375165, -0.18343, 0.194962, -0.40438, -0.254664, 0.710729, -0.363942, -0.225805, 0.882795, -0.33764, -0.225805, 0.882795, 0.337554, -0.254664, 0.710729, 0.363856, -0.18343, 0.194962, 0.404294, -0.155667, 0.00695, 0.375079, -0.225805, 0.00695, -0.33764, -0.254664, 0.194962, -0.363942, -0.317131, 0.710729, -0.309453, -0.287176, 0.882795, -0.287178, -0.287176, 0.882795, 0.287092, -0.317131, 0.710729, 0.309368, -0.254664, 0.194962, 0.363856, -0.225805, 0.00695, 0.337554, -0.287176, 0.00695, -0.287178, -0.317131, 0.194962, -0.309453, -0.368639, 0.710729, -0.243142, -0.337954, 0.882795, -0.225664, -0.337954, 0.882795, 0.225579, -0.368639, 0.710729, 0.243056, -0.317131, 0.194962, 0.309368, -0.287176, 0.00695, 0.287092, -0.337954, 0.00695, -0.225664, -0.368639, 0.194962, -0.243142, -0.406631, 0.710729, -0.167492, -0.375215, 0.882795, -0.155412, -0.375215, 0.882795, 0.155326, -0.406631, 0.710729, 0.167406, -0.368639, 0.194962, 0.243056, -0.337954, 0.00695, 0.225579, -0.375215, 0.00695, -0.155412, -0.406631, 0.194962, -0.167492, -0.430376, 0.710729, -0.0854166, -0.398594, 0.882795, -0.0792481, -0.398594, 0.882795, 0.0791625, -0.430376, 0.710729, 0.085331, -0.406631, 0.194962, 0.167406, -0.375215, 0.00695, 0.155326, -0.398594, 0.00695, -0.0792481, -0.430376, 0.194962, -0.0854166, -0.438047, 0.710729, 0, -0.406265, 0.882795, 0, -0.430376, 0.194962, 0.085331, -0.398594, 0.00695, 0.0791625, -0.406265, 0.00695, 0, -0.438047, 0.194962, 0)

[node name="Flipper" type="Node3D"]
script = ExtResource("1_p24pt")

[node name="Pivot" type="JoltHingeJoint3D" parent="."]
limit_enabled = true
limit_upper = 0.698132
limit_spring_enabled = true
limit_spring_frequency = 100.0
limit_spring_damping = 0.1
node_a = NodePath("../FlipperBody")
transform = Transform3D(2, 0, 0, 0, -8.74228e-08, 2, 0, -2, -8.74228e-08, 0, 0, 0)

[node name="FlipperBody" type="RigidBody3D" parent="."]
collision_layer = 4
collision_mask = 0
mass = 0.02
center_of_mass_mode = 1
physics_material_override = SubResource("PhysicsMaterial_ar7xr")
continuous_cd = true
angular_damp_mode = 1
angular_damp = 0.1
script = ExtResource("2_4le5i")

[node name="SolenoidSpring" type="Node3D" parent="FlipperBody"]
rotation_edit_mode = 1
script = ExtResource("4_8wtpa")
force_type = 1
solenoid_force = 300.0
spring_stiffness = 100.0
activation_type = 1

[node name="MeshInstance3D" type="MeshInstance3D" parent="FlipperBody"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.449877, 0)
mesh = ExtResource("4_d7sv0")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="FlipperBody"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.449877, 0)
shape = SubResource("ConvexPolygonShape3D_v4yik")

[connection signal="enable" from="." to="FlipperBody" method="_on_flipper_enable"]
[connection signal="flipping" from="." to="FlipperBody" method="_on_flipper_flipping"]
