[gd_scene load_steps=6 format=3 uid="uid://dxy60i7pcq7a6"]

[ext_resource type="Script" path="res://elements/flipper/flipper.gd" id="1_p24pt"]
[ext_resource type="PackedScene" uid="uid://dtwldvvy1hokt" path="res://utilities/physics_components/solenoid_spring.tscn" id="3_abhes"]
[ext_resource type="ArrayMesh" uid="uid://hvil4qfd4d2u" path="res://meshes/flipper4.obj" id="4_yog22"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_ar7xr"]
friction = 0.9

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_5a80o"]
points = PackedVector3Array(3.26381, 0.882795, 0, 3.29339, 0.710729, 0, 3.26015, 0.882795, -0.0396607, 3.26015, 0.882795, 0.0395751, 3.29339, 0.194962, 0, 3.28937, 0.710729, -0.0427445, 3.28937, 0.710729, 0.0426589, 3.24847, 0.882795, -0.0776939, 3.27732, 0.710729, -0.0837758, 3.24847, 0.882795, 0.0776083, 3.27732, 0.710729, 0.0836902, 3.28937, 0.194962, 0.0426589, 3.26015, 0.00695, 0.0395751, 3.26381, 0.00695, 0, 3.26015, 0.00695, -0.0396607, 3.28937, 0.194962, -0.0427445, 3.25833, 0.710729, -0.121552, 3.22984, 0.882795, -0.112815, 3.27732, 0.194962, -0.0837758, 3.25833, 0.710729, 0.121466, 3.22984, 0.882795, 0.112729, 3.27732, 0.194962, 0.0836902, 3.24847, 0.00695, 0.0776083, 3.24847, 0.00695, -0.0776939, 3.25833, 0.194962, -0.121552, 3.23276, 0.710729, -0.154788, 3.20427, 0.882795, -0.143567, 3.23276, 0.710729, 0.154703, 3.25833, 0.194962, 0.121466, 3.20427, 0.882795, 0.143481, 3.22984, 0.00695, 0.112729, 3.22984, 0.00695, -0.112815, 3.23276, 0.194962, -0.154788, 3.20135, 0.710729, -0.181943, 3.17359, 0.882795, -0.168837, 3.20135, 0.710729, 0.181857, 3.23276, 0.194962, 0.154703, 3.17359, 0.882795, 0.168751, 3.20427, 0.00695, 0.143481, 3.20427, 0.00695, -0.143567, 3.20135, 0.194962, -0.181943, 3.16592, 0.710729, -0.202158, 3.13853, 0.882795, -0.187596, 3.20135, 0.194962, 0.181857, 3.16592, 0.710729, 0.202073, 3.13853, 0.882795, 0.18751, 3.17359, 0.00695, 0.168751, 3.17359, 0.00695, -0.168837, 3.16592, 0.194962, -0.202158, 3.1272, 0.710729, -0.214665, 3.10054, 0.882795, -0.19916, 3.16592, 0.194962, 0.202073, 3.1272, 0.710729, 0.214579, 3.10054, 0.882795, 0.199075, 3.13853, 0.00695, 0.18751, 3.13853, 0.00695, -0.187596, 3.1272, 0.194962, -0.214665, 3.08666, 0.710729, -0.218862, 3.06073, 0.882795, -0.203015, 3.1272, 0.194962, 0.214579, 3.08666, 0.710729, 0.218777, 3.06073, 0.882795, 0.202929, 3.10054, 0.00695, 0.199075, 3.10054, 0.00695, -0.19916, 3.08666, 0.194962, -0.218862, 2.58481, 0.710729, -0.254154, 2.96211, 0.882795, -0.209611, 1.27978, 0.710729, -0.345896, 0.476601, 0.710729, -0.402347, 0.175272, 0.710729, -0.423505, 0.075194, 0.710729, -0.430529, -0.0252492, 0.710729, -0.437553, 3.08666, 0.194962, 0.218777, 2.58481, 0.710729, 0.254069, 2.96211, 0.882795, 0.209525, -0.0252492, 0.710729, 0.437553, 3.06073, 0.00695, 0.202929, 3.06073, 0.00695, -0.203015, 2.58481, 0.194962, -0.254154, 2.56728, 0.882795, -0.235823, 1.27978, 0.194962, -0.345896, 0.476601, 0.194962, -0.402347, 0.175272, 0.194962, -0.423505, 0.075194, 0.194962, -0.430529, -0.0252492, 0.194962, -0.437553, -0.105969, 0.710729, -0.429158, -0.0793058, 0.882795, -0.398235, -4.70579e-05, 0.882795, -0.40603, 0.0985698, 0.882795, -0.39952, 0.592385, 0.882795, -0.366798, 2.36968, 0.882795, -0.248929, 2.58481, 0.194962, 0.254069, 2.56728, 0.882795, 0.235737, 0.592385, 0.882795, 0.366712, 0.0985698, 0.882795, 0.399434, -4.70579e-05, 0.882795, 0.405944, -0.0793058, 0.882795, 0.398149, -0.105969, 0.710729, 0.429073, -0.0252492, 0.194962, 0.437553, 2.36968, 0.882795, 0.248843, 2.96211, 0.00695, 0.209525, 2.96211, 0.00695, -0.209611, 0.592385, 0.00695, -0.366798, 0.0985698, 0.00695, -0.39952, -4.70579e-05, 0.00695, -0.40603, -0.0793058, 0.00695, -0.398235, -0.105969, 0.194962, -0.429158, 2.56728, 0.00695, -0.235823, 2.36968, 0.00695, -0.248929, -0.183401, 0.710729, -0.404317, -0.155643, 0.882795, -0.375107, -0.155643, 0.882795, 0.375021, -0.183401, 0.710729, 0.404231, -0.105969, 0.194962, 0.429073, -0.0793058, 0.00695, 0.398149, -4.70579e-05, 0.00695, 0.405944, 0.0985698, 0.00695, 0.399434, 0.592385, 0.00695, 0.366712, 2.36968, 0.00695, 0.248843, 2.56728, 0.00695, 0.235737, -0.155643, 0.00695, -0.375107, -0.183401, 0.194962, -0.404317, -0.254625, 0.710729, -0.363885, -0.22577, 0.882795, -0.337587, -0.22577, 0.882795, 0.337502, -0.254625, 0.710729, 0.363799, -0.183401, 0.194962, 0.404231, -0.155643, 0.00695, 0.375021, -0.22577, 0.00695, -0.337587, -0.254625, 0.194962, -0.363885, -0.317082, 0.710729, -0.309405, -0.287132, 0.882795, -0.287133, -0.287132, 0.882795, 0.287048, -0.317082, 0.710729, 0.309319, -0.254625, 0.194962, 0.363799, -0.22577, 0.00695, 0.337502, -0.287132, 0.00695, -0.287133, -0.317082, 0.194962, -0.309405, -0.368582, 0.710729, -0.243104, -0.337901, 0.882795, -0.225629, -0.337901, 0.882795, 0.225544, -0.368582, 0.710729, 0.243018, -0.317082, 0.194962, 0.309319, -0.287132, 0.00695, 0.287048, -0.337901, 0.00695, -0.225629, -0.368582, 0.194962, -0.243104, -0.406568, 0.710729, -0.167466, -0.375156, 0.882795, -0.155388, -0.375156, 0.882795, 0.155302, -0.406568, 0.710729, 0.16738, -0.368582, 0.194962, 0.243018, -0.337901, 0.00695, 0.225544, -0.375156, 0.00695, -0.155388, -0.406568, 0.194962, -0.167466, -0.430309, 0.710729, -0.0854034, -0.398532, 0.882795, -0.0792358, -0.398532, 0.882795, 0.0791501, -0.430309, 0.710729, 0.0853177, -0.406568, 0.194962, 0.16738, -0.375156, 0.00695, 0.155302, -0.398532, 0.00695, -0.0792358, -0.430309, 0.194962, -0.0854034, -0.437979, 0.710729, 0, -0.406202, 0.882795, 0, -0.430309, 0.194962, 0.0853177, -0.398532, 0.00695, 0.0791501, -0.406202, 0.00695, 0, -0.437979, 0.194962, 0)

[node name="Flipper" type="Node3D"]
script = ExtResource("1_p24pt")

[node name="Pivot" type="HingeJoint3D" parent="."]
transform = Transform3D(2, 0, 0, 0, -8.74228e-08, 2, 0, -2, -8.74228e-08, 0, 0, 0)
node_a = NodePath("../FlipperBody")
angular_limit/enable = true
angular_limit/upper = 0.698132
angular_limit/lower = 0.0

[node name="FlipperBody" type="RigidBody3D" parent="."]
collision_layer = 4
collision_mask = 0
mass = 0.1
physics_material_override = SubResource("PhysicsMaterial_ar7xr")
center_of_mass_mode = 1
continuous_cd = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="FlipperBody"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.449877, 0)
mesh = ExtResource("4_yog22")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="FlipperBody"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.449877, 0)
shape = SubResource("ConvexPolygonShape3D_5a80o")

[node name="SolenoidSpring" parent="FlipperBody" instance=ExtResource("3_abhes")]
solenoid_strength = 100.0
spring_strength = 80.0
activation_type = 1
force_type = 1
reverse_force = true

[connection signal="enable" from="." to="FlipperBody" method="_on_flipper_enable"]
[connection signal="flipping" from="." to="FlipperBody" method="_on_flipper_flipping"]
